# 函数式编程
## 定义函数
```
def ---:
    ---
    return ---
```


```python
def rectangle_area(width,height):
    area=width*height
    return area

r_area=rectangle_area(320,420)
print("320*420的矩形面积{0}".format(r_area))
```

    320*420的矩形面积134400
    

## 函数参数
### 使用关键字参数调用函数


```python
def print_area(width,height):
    area=width*height
    print("{0}*{1}矩形的面积是：{2}".format(width,height,area))
    
print_area(320,420)
print_area(width=320,height=420)
print_area(320,height=420)
print(height=420,width=320)
```

    320*420矩形的面积是：134400
    320*420矩形的面积是：134400
    320*420矩形的面积是：134400
    


    ---------------------------------------------------------------------------

    TypeError                                 Traceback (most recent call last)

    Input In [4], in <cell line: 8>()
          6 print_area(width=320,height=420)
          7 print_area(320,height=420)
    ----> 8 print(height=420,width=320)
    

    TypeError: 'height' is an invalid keyword argument for print()


### 参数默认值


```python
def make_coffee(name="Cappuccino"):
    return "制作一杯{0}".format(name)

coffee1=make_coffee("Latte")
coffee2=make_coffee()

print(coffee1)
print(coffee2)
```

    制作一杯Latte
    制作一杯Cappuccino
    

### 可变参数
#### *可变参数


```python
def sum(*numbers,multiple=1):
    total=0
    for number in numbers:
        total+=number
    return total*multiple

print(sum(100.0,20.0,30.0))
print(sum(80,30))
print(sum(30,80,multiple=2))
double_tuple={50.0,60.0,0.0}
print(sum(30,80,*double_tuple))
```

    150.0
    110
    220
    220.0
    

#### **可变参数


```python
def show(sep=':', **info):
    print('----info----')
    for key, value in info.items():
        print('{0} {2} {1}'.format(key, value, sep))


show('->', name='tony', age=18, sex = True)
show(student_name='tony',student_no='1000',sep='=')
stu_dict={'name':'tony','age':18}
show(**stu_dict,sex=True,sep='=')
```

    ----info----
    name -> tony
    age -> 18
    sex -> True
    ----info----
    student_name = tony
    student_no = 1000
    ----info----
    name = tony
    age = 18
    sex = True
    

## 函数返回值
### 无返回值函数


```python
def show(sep=':', **info):
    print('----info----')
    for key, value in info.items():
        print('{0} {2} {1}'.format(key, value, sep))
    return

result=show('->', name='tony', age=18, sex = True)
print(result)

def sum(*numbers,multiple=1):
    total=0
    for number in numbers:
        total+=number
    return total*multiple

print(sum(100.0,20.0,30.0))
print(sum(80,30))
```

    ----info----
    name -> tony
    age -> 18
    sex -> True
    None
    150.0
    110
    

### 多返回值函数


```python
def position(dt,speed):
    posx=speed[0]*dt
    posy=speed[1]*dt
    return(posx,posy)

move=position(60,(10,-5))
print("物体位移：({0},{1})".format(move[0],move[1]))
```

    物体位移：(600,-300)
    

## 函数变量作用域


```python
x=20
def print_value():
    print("函数中x={0}".format(x))
    
print_value()
print("全局变量={0}".format(x))
```

    函数中x=20
    全局变量=20
    


```python
x=20
def print_value():
    x=10
    print("函数中x={0}".format(x))
    
print_value()
print("全局变量={0}".format(x))
```

    函数中x=10
    全局变量=20
    


```python
x=20
def print_value():
    global x
    x=10
    print("函数中x={0}".format(x))
    
print_value()
print("全局变量={0}".format(x))
```

    函数中x=10
    全局变量=10
    

## 生成器


```python
def square(num):
    n_list=[]
    
    for i in range(1,num+1):
        n_list.append(i*i)
        
    return n_list

for i in square(5):
    print(i,end=' ')
```

    1 4 9 16 25 


```python
def square(num):
    n_list=[]
    
    for i in range(1,num+1):
        yield i*i
        
    return n_list

for i in square(5):
    print(i,end=' ')
```

    1 4 9 16 25 


```python
def square(num):
    for i in range(1,num+1):
        yield i*i
```


```python
n_seq=square(5)
```


```python
n_seq.__next__()
```




    1




```python
n_seq.__next__()
```




    4




```python
n_seq.__next__()
```




    9




```python
n_seq.__next__()
```




    16




```python
n_seq.__next__()
```




    25




```python
n_seq.__next__()
```


    ---------------------------------------------------------------------------

    StopIteration                             Traceback (most recent call last)

    Input In [14], in <cell line: 1>()
    ----> 1 n_seq.__next__()
    

    StopIteration: 


## 嵌套函数


```python
def calculate(n1,n2,opr):
    multiple=2
    
    def add(a,b):
        return (a+b)*multiple
    
    def sub(a,b):
        return (a-b)*multiple
    
    if opr=='+':
        return add(n1,n2)
    else:
        return sub(n1,n2)
    
print(calculate(10,5,'+'))
```

    30
    

## 函数式编程基础
### 函数类型


```python
def calculate_fun(opr):
    def add(a,b):
        return a+b
    
    def sub(a,b):
        return a-b
    
    if opr=='+':
        return add
    else:
        return sub

f1=calculate_fun('+')
f2=calculate_fun('-')

print(type(f1))

print('10+5={0}'.format(f1(10,5)))
print('10-5={0}'.format(f2(10,5)))
```

    <class 'function'>
    10+5=15
    10-5=5
    

### Lamda表达式


```python
def calculate_fun(opr):
    if opr=='+':
        return lambda a,b:(a+b)
    else:
        return lambda a,b:(a-b)

f1=calculate_fun('+')
f2=calculate_fun('-')

print(type(f1))

print('10+5={0}'.format(f1(10,5)))
print('10-5={0}'.format(f2(10,5)))
```

    <class 'function'>
    10+5=15
    10-5=5
    

### 三大基础函数
#### filter()


```python
users=['tony','tom','ben','alex']
users_filter=filter(lambda u:u.startswith('t'),users)
print(list(users_filter))
```

    ['tony', 'tom']
    


```python
number_list=range(1,11)
number_filter=filter(lambda it:it%2==0,number_list)
print(list(number_filter))
```

    [2, 4, 6, 8, 10]
    

#### map()


```python
users=['tony','tom','ben','alex']
users_map=map(lambda u:u.lower(),users)
print(list(users_map))
```

    ['tony', 'tom', 'ben', 'alex']
    


```python
users=['tony','tom','ben','alex']
users_filter=filter(lambda u:u.startswith('t'),users)
users_map=map(lambda u:u.lower(),filter(lambda u:u.startswith('t'),users))
print(list(users_map))
```

    ['tony', 'tom']
    


```python
from functools import reduce
a={1,2,3,4}
a_reduce=reduce(lambda acc,i:acc+i,a)
print(a_reduce)
```

    10
    


